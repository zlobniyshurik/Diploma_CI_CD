# DEPLOY_SSH_KEYS

## Выполняемые действия

1. Выкладывает в `/root/.ssh` комплект SSH-ключей с указанным именем из заданного локального каталога.

2. Добавляет публичный ключ в `/root/.ssh/authorized_keys`

3. Настраивает машину принимать ключи из заданного домена без строгой проверки и использовать ключи из  
пункта 1 по умолчанию при присоединении к другим машинам из этого же домена.

Фактически, используя полученный комплект ключей, машины внутри домена могут прозрачно общаться друг с другом по SSH  
без каких либо имен/явок/паролей

## Переменные

***defaults/main.yml***
| Имя переменной | Описание | Возможные значения | Значение по умолчанию |
| :--- | :--------- | :--- | :---: |
| **deploy_ssh_keys_priv_dir** | Локальный каталог, откуда берётся пара SSH-ключей || **/opt** |
| **deploy_ssh_keys_priv_key** | Имя приватного ключа || **secret** |
| **deploy_ssh_keys_trusted_domain** | Имя доверенного домена, для которого отключается строгая проверка ключей и для подключения к машинам которого используется заданный ключ|| **example.com** |
